var We=Object.defineProperty,ze=Object.defineProperties;var Te=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var Ge=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var J=(e,t,n)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,O=(e,t)=>{for(var n in t||(t={}))Ge.call(t,n)&&J(e,n,t[n]);if(ge)for(var n of ge(t))He.call(t,n)&&J(e,n,t[n]);return e},L=(e,t)=>ze(e,Te(t));var b=(e,t,n)=>(J(e,typeof t!="symbol"?t+"":t,n),n);import{c as I,f as P,a as Q,A as Ue,d as S,i as Z,r as C,b as d,E as Ke,e as Je,x as R,l as Qe,s as V,p as ve,g as Ze,h as et,o as tt,j as ee,k as nt,m as X,n as j,F as it,q as A,t as st,w as te,u as xe,v as ne,y as ye,z as ot,B as rt,C as at,D as lt,G as ct,H as we,I as dt,J as ut,K as be,L as ie,M as ft,N as Se,O as se,P as ht,Q as mt,R as z,S as pt,T as gt,U as Ce,V as Ee,W as vt,X as xt}from"./vendor.d4696ee0.js";const yt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}};yt();const wt="modulepreload",ke={},bt="/sa-form/",St=function(t,n){return!n||n.length===0?t():Promise.all(n.map(i=>{if(i=`${bt}${i}`,i in ke)return;ke[i]=!0;const s=i.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":wt,s||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),s)return new Promise((r,c)=>{a.addEventListener("load",r),a.addEventListener("error",c)})})).then(()=>t())};var k;(function(e){e[e.Add=0]="Add",e[e.Delete=1]="Delete",e[e.Attr=2]="Attr"})(k||(k={}));function De(e){return Reflect.has(e[0],"id")}function Ct(e){return!Reflect.has(e[0],"id")}function Sn(e,t){return Reflect.has(t.attrs,e)}class _{constructor(t){b(this,"parent");b(this,"children");b(this,"attrs");this.parent=t.parent,this.attrs=I(t.attrs),t.children&&(this.children=t.children)}}class B{constructor(t){b(this,"type");b(this,"time");b(this,"data");this.time=t.time,this.type=t.type,this.data=t.data}}class Et{constructor(t){b(this,"records",[]);b(this,"index",-1);b(this,"max");b(this,"recording");var n,i;this.max=(n=t==null?void 0:t.max)!=null?n:20,this.recording=(i=t==null?void 0:t.recording)!=null?i:!0}getPrevRecord(){if(!(this.index<0))return this.records[this.index]}getNextRecord(){if(!(this.index>=this.records.length-1))return this.records[this.index+1]}}function T(e){const t=q(e[0]);let n=t.position.x,i=t.position.x+t.size.width,s=t.position.y,o=t.position.y+t.size.height;return e.forEach(a=>{const r=q(a);r.position.x<n&&(n=r.position.x),i<r.position.x+r.size.width&&(i=r.position.x+r.size.width),r.position.y<s&&(s=r.position.y),o<r.position.y+r.size.height&&(o=r.position.y+r.size.height)}),{x:n,y:s,width:i-n,height:o-s}}function q(e){return e instanceof _?{position:{x:e.attrs.offsetX,y:e.attrs.offsetY},size:{width:e.attrs.width,height:e.attrs.height}}:{position:e.getProp("position"),size:e.getProp("size")}}function kt(e){const t=i(e),n=Number(t);return n?(n+1).toString():"1";function i(s){var h;const o=s.attrs.id;let a="";if((h=s.children)==null?void 0:h.length)for(const l of s.children){const u=i(l),m=Number(a),p=Number(u);m&&p&&(a=Math.max(m,p).toString()),p&&(a=u)}const r=Number(a),c=Number(o);return r&&c?Math.max(r,c).toString():r?a:o}}function Dt(e,t,{canvas:n}){var s,o;const i=(s=e.parent)==null?void 0:s.data.id;return new t({attrs:e.data,parent:O({},i&&(o=P(n,a=>a.attrs.id===i))!=null?o:n),children:[]})}function oe(e,t){const n=Array.isArray(e)?e:[e],i=t.getSelectedCells().filter(s=>!n.includes(s.data.id));for(const s of n)t.isSelected(s)||t.select(s);for(const s of i)t.unselect(s)}function Ne(e,t){return Reflect.has(t.attrs,e)}function re(e,t){return e!==void 0&&t==="x6"}var y;(function(e){e[e.Canvas=1]="Canvas",e[e.Button=2]="Button",e[e.Select=3]="Select",e[e.Container=4]="Container"})(y||(y={}));function ae(e,t){var i;if(!(e==null?void 0:e.graph))return;if(t){const s=[];for(const r of t)typeof r=="object"?s.push(r.toJSON().id):s.push(r);const o=s.map(r=>Q(e.canvas.children,c=>c.attrs.id===r)),a=new B({type:k.Delete,time:new Date,data:o.map(r=>({prev:I(r)}))});e.addRecord(a),e.graph.removeCells(s);for(const r of o)((i=r.parent)==null?void 0:i.children)&&Ue.remove(r.parent.children,c=>c.attrs.id===r.attrs.id);return o}const n=e.graph.getSelectedCells();n.length&&ae(e,n)}function Nt(e){e.clipboard.copy(e,{deep:!0,useLocalStorage:!0})}function Xt(e){e.clipboard.cut(e,{deep:!0,useLocalStorage:!0})}function Xe(e,t,n){if(n.clipboard.isEmpty(n.clipboard.clips)||!n.graph)return;if(t&&t.data.type!==y.Container)return console.error(`[Sa error]: can not paste elements in ${y[t.data.type]}.`);const i=T(n.clipboard.clips.elements),s=i.x-e.offsetX,o=i.y-e.offsetY;n.clipboard.paste(n,t==null?void 0:t.data.id,{deep:!0,nodeProps:a=>({id:n.getNextId(),offsetX:a.attrs.offsetX-s,offsetY:a.attrs.offsetY-o})})}var Yt=S({name:"SaFormPcSelect",setup(){var i;const e=Z("getNode"),t=e==null?void 0:e(),n=C((i=t==null?void 0:t.data.options)!=null?i:[]);return t==null||t.on("change:data",({current:s})=>{var o;n.value=(o=s.options)!=null?o:[]}),()=>d(Ke,{class:"sa-graph-vue-component"},{default:()=>[n.value?n.value.map(s=>d(Je,{label:s.name,value:s.name},null)):""]})}});function $(e){const t=Object.assign({id:e.attrs.id,x:e.attrs.offsetX,y:e.attrs.offsetY,width:e.attrs.width,height:e.attrs.height},{data:e.attrs});switch(e.attrs.type){case y.Button:return new R.exports.Shape.Rect(L(O({},t),{attrs:{rect:{fill:"#31D0C6",stroke:"#4B4A67",strokeWidth:1},text:{text:y[e.attrs.type],fill:"white"}}}));case y.Select:return new Qe.VueShape(L(O({},t),{shape:"vue-shape",component:{render:()=>d(Yt,null,null)}}));case y.Container:return new R.exports.Shape.Rect(L(O({},t),{attrs:{rect:{fill:"#31D0C6",stroke:"#4B4A67",strokeWidth:1}}}));default:throw new Error(`[Sa error]: unexpected element type ${e.attrs.type}.`)}}class It{constructor(){b(this,"clips")}isEmpty(t=this.clips){var n;return!((n=this.clips)==null?void 0:n.elements.length)}copy(t,n){this.clips={elements:I(t.selected),type:"copy"}}cut(t,n){this.clips={elements:I(t.selected),type:"cut"},ae(t)}paste(t,n=t.canvas.attrs.id,i){if(this.isEmpty(this.clips)||!t.graph)return;const s=P(t.canvas,c=>c.attrs.id===n);if(!s){console.warn("[Sa warn]: can not paste in undefined parent.");return}const o=this.clips.elements.map(c=>{const h=new _(L(O({},c),{parent:s}));return(i==null?void 0:i.nodeProps)&&V(h.attrs,i.nodeProps(c)),h}),a=o.map(c=>$(c)),r=n?t.graph.getCellById(s.attrs.id):void 0;if(r)for(const c of a)c.setParent(r),r.addChild(c);return t.addChildren(o,n),t.graph.addNodes(a),o}}function Pt(e){return Reflect.has(e,"id")}class Ot{constructor(t){b(this,"type");b(this,"canvas");b(this,"history");b(this,"clipboard");b(this,"selected",[]);b(this,"graph");b(this,"nextId");b(this,"display");this.type="PcForm",this.history=new Et,this.clipboard=new It,this.nextId="1",this.display=t.display,this.canvas=new _({parent:void 0,children:[],attrs:t.attrs})}setCanvas(t){this.canvas=t,this.selected=[t],this.nextId=kt(t)}setGraph(t){this.graph=t}getNextId(){const t=this.nextId;return this.nextId=String(Number(t)+1),t}addChild(t,n){var o;const i=(o=typeof n=="string"?Q(this.canvas.children,a=>a.attrs.id===n):n)!=null?o:this.canvas;G(this,t);const s=new B({type:k.Add,time:new Date,data:[{next:O({},I(t))}]});return this.addRecord(s),this.setSelected(t),i}addChildren(t,n){var o;const i=(o=typeof n=="string"?Q(this.canvas.children,a=>a.attrs.id===n):n)!=null?o:this.canvas;for(const a of t)G(this,a);const s=new B({type:k.Add,time:new Date,data:t.map(a=>({next:O({},I(a))}))});return this.addRecord(s),this.setSelected(t),i}setSelected(t){if(!arguments.length||Array.isArray(t)&&!t.length)return this.selected=[this.canvas],this.canvas;if(!!this.canvas.children){if(typeof t=="string"){const n=P(this.canvas,i=>i.attrs.id===t);return n&&(this.selected=[n],re(this.graph,this.display)&&oe(t,this.graph)),n}if(Array.isArray(t)){const n=[];for(const i of t)if(typeof i=="string"){const s=P(this.canvas,o=>o.attrs.id===i);s&&n.push(s)}else n.push(i);return re(this.graph,this.display)&&oe(n.map(i=>i.attrs.id),this.graph),this.selected=n,n}if(typeof t=="object")return this.selected=[t],re(this.graph,this.display)&&oe(t.attrs.id,this.graph),t}}updateElemData(t,n,i=!0){if(!t)return;const s=typeof t=="string"?P(this.canvas,o=>o.attrs.id===t):t;if(!!s){if(i){const o=new B({type:k.Attr,time:new Date,data:[{id:s.attrs.id,prev:I(ve(s.attrs,Object.keys(n))),next:I(n)}]});this.addRecord(o)}return le(this,s.attrs.id,n),V(s.attrs,n),s}}updateElemsData(t){const n=t.map(s=>({el:Pt(s)?P(this.canvas,o=>o.attrs.id===s.id):s.element,data:s.data})),i=new B({type:k.Attr,time:new Date,data:n.map(s=>({id:s.el.attrs.id,prev:I(ve(s.el.attrs,Object.keys(s.data))),next:I(s.data)}))});this.addRecord(i);for(const s of n)this.updateElemData(s.el,s.data,!1);return n.map(s=>s.el)}addRecord(t){console.log("[Sa info]: New record has been added.",t),this.history.index&&this.history.records.length>this.history.index+1&&this.history.records.splice(this.history.index+1),this.history.records.push(t),this.history.index+=1}undo(){var n,i;const t=this.history.getPrevRecord();if(!t){console.warn("[Sa warn]: None previous record in history.");return}if(De(t.data)){for(const s of t.data){const o=P(this.canvas,a=>a.attrs.id===s.id);o&&(V(o.attrs,s.prev),le(this,s.id,s.prev))}this.setSelected(t.data.map(s=>s.id))}else{for(const s of t.data)t.type===k.Add?Ye(this,(i=(n=s.next)==null?void 0:n.attrs)==null?void 0:i.id):t.type===k.Delete&&G(this,s.prev);t.type===k.Add?this.setSelected(t.data.map(s=>s.next.attrs.id)):this.setSelected(t.data.map(s=>s.prev.attrs.id))}this.history.index-=1}redo(){var n,i;const t=this.history.getNextRecord();if(!t){console.warn("[Sa warn]: None next record in history.");return}if(De(t.data)){for(const s of t.data){const o=P(this.canvas,a=>a.attrs.id===s.id);o&&(V(o.attrs,s.next),le(this,s.id,s.next))}this.setSelected(t.data.map(s=>s.id))}else if(Ct(t.data)){for(const s of t.data)t.type===k.Add?G(this,s.next):t.type===k.Delete&&Ye(this,(i=(n=s.prev)==null?void 0:n.attrs)==null?void 0:i.id);t.type===k.Add?this.setSelected(t.data.map(s=>s.next.attrs.id)):this.setSelected(t.data.map(s=>s.prev.attrs.id))}this.history.index+=1}}function le(e,t,n){var s,o,a,r,c,h;if(!e.graph)return;const i=e.graph.getCellById(t);if(i){const l=q(i);i.setProp({position:{x:(s=n.offsetX)!=null?s:l.position.x,y:(o=n.offsetY)!=null?o:l.position.y},size:{width:(a=n.width)!=null?a:l.size.width,height:(r=n.height)!=null?r:l.size.height}}),i.updateData(n)}else e.graph.size.resize((c=n.width)!=null?c:e.canvas.attrs.width,(h=n.height)!=null?h:e.canvas.attrs.height)}function G(e,t){var n;if(!(!e.canvas.children||!t)&&t.parent){if(e.graph&&e.display==="x6"&&!e.graph.hasCell(t.attrs.id)){const o=$(t);e.graph.addCell(o);const a=e.graph.getCellById(t.parent.attrs.id);a&&a.addChild(o)}const i=P(e.canvas,s=>{var o;return s.attrs.id===((o=t.parent)==null?void 0:o.attrs.id)});i&&((n=i.children)==null||n.push(t),t.parent=i)}}function Ye(e,t){var i;if(!e.canvas.children||!t)return;const n=P(e.canvas,s=>s.attrs.id===t);n&&e.canvas.children&&(e.display==="x6"&&((i=e.graph)==null||i.removeCell(n.attrs.id)),Ze(e.canvas.children,s=>s.attrs.id===n.attrs.id))}const _t=[{title:"undo",icon:d("i",{class:"iconfont iconchexiao1"},null),click:e=>e.undo()},{title:"redo",icon:d("i",{class:"iconfont iconhuifu1"},null),click:e=>e.redo()}];function Mt(e,t){return Ie(e,t)}function At(e,t){return Ie(e,t)}function Lt(e,t){const n=e.getProp("position");return e.data.offsetX=n.x,e.data.offsetY=n.y,setTimeout(()=>{var s;const i=Dt(e,_,t);t.addChild(i,(s=e.parent)==null?void 0:s.id)},0),!0}function Ie(e,t){const n=t.getNextId(),i=t.canvas;switch(e.data.name){case"Button":return $({attrs:{id:n,name:"Button",width:80,height:40,type:y.Button,offsetX:0,offsetY:0},parent:i});case"Select":return $({attrs:{id:n,name:"Select",width:80,height:40,type:y.Select,offsetX:0,offsetY:0,options:[{name:"default"}]},parent:i});case"Container":return $({attrs:{id:n,name:"Container",width:200,height:100,type:y.Container,offsetX:0,offsetY:0},parent:i});default:console.error("[Sa error]: unexpected drag node",e)}return e}const Rt=e=>({groups:[{name:"Normal",collapsable:!0},{name:"Container",collapsable:!0}],getDragNode:t=>Mt(t,e),getDropNode:t=>At(t,e),validateNode:t=>Lt(t,e),nodes:{Normal:[new R.exports.Shape.Rect({width:80,height:40,attrs:{rect:{fill:"#31D0C6",stroke:"#4B4A67",strokeWidth:1},text:{text:"Button",fill:"white"}},data:{name:"Button"}}),new R.exports.Shape.Rect({width:80,height:40,attrs:{rect:{fill:"#31D0C6",stroke:"#4B4A67",strokeWidth:1},text:{text:"Select",fill:"white"}},data:{name:"Select"}})],Container:[new R.exports.Shape.Rect({width:80,height:40,attrs:{rect:{fill:"#31D0C6",stroke:"#4B4A67",strokeWidth:1},text:{text:"Container",fill:"white"}},data:{name:"Container"}})]}}),Bt=e=>({groups:[{name:"Normal",collapsable:!0},{name:"Container",collapsable:!0}],nodes:{Normal:[{icon:"iconanniu",attrs:{type:y.Button,name:"Button",width:80,height:40,background:"#eee"}}]}}),jt=e=>e==="x6"?Rt:Bt,$t=()=>{var s;const e=new _({parent:void 0,children:[],attrs:{type:y.Canvas,id:"1",name:"mock pc form",width:800,height:600,offsetX:0,offsetY:0}}),t=new _({parent:e,attrs:{id:"2",type:y.Button,name:"mock button 1",width:80,height:40,offsetX:200,offsetY:100,background:"#eee"}}),n=new _({parent:e,attrs:{type:y.Button,id:"3",name:"mock button 2",width:80,height:40,offsetX:150,offsetY:200,background:"#eee"}}),i=new _({parent:e,attrs:{type:y.Container,id:"4",name:"mock container",width:400,height:200,offsetX:50,offsetY:300,background:"#eee"},children:[]});return(s=e.children)==null||s.push(t,n,i),e};function Ft(e,t,n){var a;const i=new R.exports.Graph({container:e,width:t.attrs.width,height:t.attrs.height,snapline:!0,grid:{visible:!0,type:"doubleMesh",args:[{color:"#eee",thickness:1},{color:"#ddd",thickness:1,factor:4}]},selecting:{enabled:!0,multiple:!0,rubberband:!0,movable:!0},embedding:{enabled:!0,validate:({parent:r,child:c})=>c.parent===r||r.data.type===y.Container&&!i.hasCell(c)},resizing:!0,translating:{restrict(r){var l;const c=r.cell,h=r.graph.selection;if(c.isNode()){const u=c.getParent();if(u){const m=u.getBBox();if((l=h==null?void 0:h.cells)==null?void 0:l.length){const p=T(h.cells),f=q(c);return{x:m.x+f.position.x-p.x,y:m.y+f.position.y-p.y,width:m.width-(p.width-f.size.width),height:m.height-(p.height-f.size.height)}}return m}if(h==null?void 0:h.length){const m=T(h.cells),p=q(c);return{x:p.position.x-m.x,y:p.position.y-m.y,width:t.attrs.width-(m.width-p.size.width),height:t.attrs.height-(m.height-p.size.height)}}}return{x:0,y:0,width:t.attrs.width,height:t.attrs.height}}}});et(n).setGraph(i).setCanvas(t);const s=(a=t.children)==null?void 0:a.map(r=>$(r));s&&i.addNodes(s),i.on("blank:mousedown",()=>{i.cleanSelection()}),i.on("blank:contextmenu",({e:r})=>{i.cleanSelection()}),i.on("cell:mousedown",({cell:r})=>{r.toFront({deep:!0})}),i.on("cell:contextmenu",({cell:r,e:c})=>{i.isSelected(r)||(i.cleanSelection(),i.select(r))}),i.on("selection:changed",({selected:r})=>{n.setSelected(r.map(c=>c.data.id)),r.length>1?i.disableSnapline():i.enableSnapline()});let o=[];i.on("node:moved",({cell:r})=>{if(n.selected.length>1&&n.selected.some(c=>c.attrs.id===r.id))o.push(r),o.length===n.selected.length&&(n.updateElemsData(o.map(c=>{const{x:h,y:l}=c.position();return{id:c.id,data:{offsetX:h,offsetY:l}}})),o=[]);else{const{x:c,y:h}=r.position();n.updateElemData(r.id,{offsetX:c,offsetY:h}),n.setSelected(r.id)}}),i.on("node:resized",({cell:r})=>{const{width:c,height:h}=r.size();n.updateElemData(r.data.id,{width:c,height:h})})}function ce(e,t,n,i=!0){e=e||window.event,i&&e.preventDefault(),e.dataTransfer&&(e.dataTransfer[t]=n)}function H(e){return e.type.includes("mouse")}function Vt(e){const t={background:e.attrs.background,width:e.attrs.width+"px",height:e.attrs.height+"px",left:e.attrs.offsetX+"px",top:e.attrs.offsetY+"px"};return tt(t,n=>n===void 0)}const U=8,qt=["tl","tm","tr","mr","br","bm","bl","ml"];let de=[];const Pe={y:{t:"top",m:"marginTop",b:"bottom"},x:{l:"left",m:"marginLeft",r:"right"}},D={mouseX:0,mouseY:0,width:0,height:0,offsetX:0,offsetY:0};function Wt(e){const t={width:`${U}px`,height:`${U}px`};return t[Pe.y[e[0]]]=`${U/-2}px`,t[Pe.x[e[1]]]=`${U/-2}px`,t}var Oe=S({name:"ElementRenderer",props:{drawer:{required:!0,type:Object},element:{required:!0,type:Object}},setup(e){function t(l,u){D.mouseX=H(u)?u.pageX:u.touches[0].pageX,D.mouseY=H(u)?u.pageY:u.touches[0].pageY,D.width=e.element.attrs.width,D.height=e.element.attrs.height,D.offsetX=e.element.attrs.offsetX,D.offsetY=e.element.attrs.offsetY,de=l.split(""),s(),u.stopPropagation()}function n(l){var E;const u=H(l)?l.pageX:l.touches[0].pageX,m=H(l)?l.pageY:l.touches[0].pageY,p={x:D.mouseX-u,y:D.mouseY-m},f=e.element;switch(de[0]){case"b":p.y=-p.y;break;case"t":{const g=D.offsetY-p.y;if(g<0||!f.attrs.height&&p.y<0)return;f.attrs.offsetY=g;break}case"m":p.y=0;break}switch(de[1]){case"r":p.x=-p.x;break;case"l":{const g=D.offsetX-p.x;if(g<0||!f.attrs.width&&p.x<0)return;f.attrs.offsetX=g;break}case"m":p.x=0;break}f.attrs.width=D.width+p.x,f.attrs.height=D.height+p.y,f.attrs.width=f.attrs.width<0?0:f.attrs.width,f.attrs.height=f.attrs.height<0?0:f.attrs.height;const M=f.parent.attrs.width-f.attrs.offsetX,v=f.parent.attrs.height-f.attrs.offsetY;if(f.type===y.Container&&((E=f.children)==null?void 0:E.length)){const g=T(f.children);f.attrs.width=f.attrs.width>g.width+g.x?f.attrs.width:g.width+g.x,f.attrs.height=f.attrs.height>g.height+g.y?f.attrs.height:g.height+g.y}else f.attrs.width=f.attrs.width>M?M:f.attrs.width,f.attrs.height=f.attrs.height>v?v:f.attrs.height}function i(l){const u=new B({time:new Date,type:k.Attr,data:[{id:e.element.attrs.id,prev:{width:D.width,height:D.height},next:{width:e.element.attrs.width,height:e.element.attrs.height}}]});e.drawer.addRecord(u),V(D,{mouseX:0,mouseY:0,width:0,height:0,offsetX:0,offsetY:0}),o()}function s(){document.documentElement.addEventListener("mousemove",n),document.documentElement.addEventListener("mouseup",i),document.documentElement.addEventListener("mouseleave",i),document.documentElement.addEventListener("touchmove",n),document.documentElement.addEventListener("touchend touchcancel",i,!0),document.documentElement.addEventListener("touchstart",i)}function o(){document.documentElement.removeEventListener("mousemove",n),document.documentElement.removeEventListener("mouseup",i),document.documentElement.removeEventListener("mouseleave",i),document.documentElement.removeEventListener("touchmove",n),document.documentElement.removeEventListener("touchend touchcancel",i,!0),document.documentElement.removeEventListener("touchstart",i,!0)}function a(){return e.drawer.selected[0]===e.element}function r(l){if(e.drawer.setSelected(e.element),!e.element.parent)return;const u={totalMoveX:0,totalMoveY:0,moveX:0,_startX:l.clientX,_endX:0,moveY:0,_startY:l.clientY,_endY:0,finalOffsetX:0,finalOffsetY:0};function m(f){c(u,f)}const p=new Date;document.addEventListener("mousemove",m),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",m),h(u,l,p)},{once:!0}),l.stopPropagation()}function c(l,u){l._endX=u.clientX,l.moveX=l._endX-l._startX,l._endY=u.clientY,l.moveY=l._endY-l._startY,l._startX=u.clientX,l._startY=u.clientY,l.finalOffsetX=e.element.attrs.offsetX+l.moveX,l.finalOffsetY=e.element.attrs.offsetY+l.moveY;const m=e.element.attrs.offsetX,p=e.element.attrs.offsetY;e.drawer.updateElemData(e.element,{offsetX:l.finalOffsetX<0?0:l.finalOffsetX+e.element.attrs.width>e.element.parent.attrs.width?e.element.parent.attrs.width-e.element.attrs.width:l.finalOffsetX,offsetY:l.finalOffsetY<0?0:l.finalOffsetY+e.element.attrs.height>e.element.parent.attrs.height?e.element.parent.attrs.height-e.element.attrs.height:l.finalOffsetY},!1),l.totalMoveX+=e.element.attrs.offsetX-m,l.totalMoveY+=e.element.attrs.offsetY-p}function h(l,u,m){const f=new Date().getTime()-m.getTime();(l.totalMoveX||l.totalMoveY)&&(f>200?e.drawer.addRecord(new B({time:new Date,type:k.Attr,data:[{id:e.element.attrs.id,prev:{offsetX:l.finalOffsetX-l.totalMoveX,offsetY:l.finalOffsetY-l.totalMoveY},next:{offsetX:l.finalOffsetX,offsetY:l.finalOffsetY}}]})):e.drawer.updateElemData(e.element,{offsetX:e.element.attrs.offsetX-l.totalMoveX,offsetY:e.element.attrs.offsetY-l.totalMoveY},!1))}return()=>{var l;return d("div",{id:e.element.attrs.id,style:Vt(e.element),class:"native-element",onMousedown:r},[e.element.parent&&a()&&d("div",{class:"vdr"},[qt.map(u=>d("div",{class:`vdr-stick vdr-stick-${u}`,key:u,style:Wt(u),onMousedown:m=>t(u,m),onTouchstart:m=>t(u,m)},null))]),e.element.parent&&e.element.attrs.name,((l=e.element.children)==null?void 0:l.length)&&e.element.children.map(u=>d(Oe,{drawer:e.drawer,element:u},null))])}}}),zt=S({name:"NativeWorkspace",props:{drawer:{required:!0,type:Object}},setup(e){function t(i){ce(i,"dropEffect","copy")}function n(i){var l;ce(i,"dropEffect","copy");const s=(l=i.dataTransfer)==null?void 0:l.getData("element");if(!s){console.error("[Sa warn]\uFF1AEvent dataTransfer's 'element' data is not existed but it's necessary.");return}let o=i.target;for(;o&&!o.id&&o.parentElement;)o=o.parentElement;const a=o.id,r=P(e.drawer.canvas,u=>u.attrs.id===a),c=JSON.parse(s),h=new _({parent:r,attrs:L(O({},c),{id:e.drawer.getNextId(),offsetX:i.offsetX,offsetY:i.offsetY})});e.drawer.addChild(h,r)}return{onDrop:n,onDragover:t}},render(){return d("div",{class:"bg-slate-100 w-fit relative",onDrop:this.onDrop,onDragover:this.onDragover},[d(Oe,{drawer:this.drawer,element:this.drawer.canvas},null)])}}),Tt=S({name:"SaPcFormRender",props:{drawer:{required:!0,type:Object},display:{type:String}},setup(e){const t=C(null),n=C(null),i=C([]),s=ee(),o=ee();nt(()=>{if(t.value){const r=$t();if(console.log("create canvas",r),e.display==="x6")return Ft(t.value,r,e.drawer);e.display==="native"&&e.drawer.setCanvas(r)}});const a=X(()=>i.value.length?d(it,null,[d(j("v-contextmenu-item"),{onClick:()=>Nt(e.drawer)},{default:()=>[A("copy")]}),d(j("v-contextmenu-item"),{onClick:()=>Xt(e.drawer)},{default:()=>[A("cut")]}),d(j("v-contextmenu-item"),{onClick:()=>Xe(s.value,o.value,e.drawer)},{default:()=>[A("paste")]}),d(j("v-contextmenu-item"),{type:"danger",icon:d(st,null,null),onClick:()=>ae(e.drawer)},{default:()=>[A("delete")]})]):d(j("v-contextmenu-item"),{onClick:()=>Xe(s.value,void 0,e.drawer)},{default:()=>[A("paste")]}));return{workspace:t,contextmenu:n,selectedCells:i,graphContextmenu:a}},render(){return d("div",null,[this.display==="native"?d(zt,{ref:"workspace",drawer:this.drawer},null):d("div",{ref:"workspace"},null),d(j("v-contextmenu"),{ref:"contextmenu"},{default:()=>[this.graphContextmenu]})])}}),Y;(function(e){e.Input="input",e.Number="number",e.Select="select",e.Dialog="dialog",e.Color="color",e.Cascader="cascader"})(Y||(Y={}));const w={"widget-id":{label:"id",attr:"id",type:Y.Input,disabled:!0},"widget-name":{label:"name",attr:"name",type:Y.Input},"widget-width":{label:"width",attr:"width",type:Y.Number},"widget-height":{label:"height",attr:"height",type:Y.Number},"widget-offsetX":{label:"x",attr:"offsetX",type:Y.Number},"widget-offsetY":{label:"y",attr:"offsetY",type:Y.Number}},Gt={"select-options":{label:"options",attr:"options",type:Y.Dialog,dialog:{component:"widget-options",title:"select-options",filter:e=>e.map(t=>t.name).join(";")},disabled:!0}},Ht={[y.Canvas]:{basic:[w["widget-id"],w["widget-name"],w["widget-width"],w["widget-height"]]},[y.Container]:{basic:[w["widget-id"],w["widget-name"],w["widget-width"],w["widget-height"],w["widget-offsetX"],w["widget-offsetY"]]},[y.Button]:{basic:[w["widget-id"],w["widget-name"],w["widget-width"],w["widget-height"],w["widget-offsetX"],w["widget-offsetY"]]},[y.Select]:{basic:[w["widget-id"],w["widget-name"],w["widget-width"],w["widget-height"],w["widget-offsetX"],w["widget-offsetY"],Gt["select-options"]]}};function Ut(e,t,n){const i=n.selected[0];!i||n.updateElemData(i,{[e]:t})}const Kt={"./PcForm/controller/widget-options/index.tsx":()=>St(()=>import("./index.1234ec75.js"),["assets/index.1234ec75.js","assets/index.3be83ae9.css","assets/vendor.d4696ee0.js"])},Jt=e=>({drawer:new Ot({attrs:{type:y.Canvas,id:"1",name:"Pc Form Demo",width:800,height:600,offsetX:0,offsetY:0},display:e}),header:_t,side:jt(e),workspace:Tt,controller:{plugins:Ht,valueChange:Ut,components:Kt}}),Qt={PcForm:e=>Jt(e)};var Zt=S({name:"SaFormLayoutHeader",props:{options:{required:!0,type:Array},drawer:{required:!0,type:Object}},render(){return d("div",{class:"sa-form-header flex justify-start p-1"},[this.options.map(e=>d("span",{class:"header-tool",onClick:t=>e.click(this.drawer,t),title:e.title,style:{width:e.width?`${e.width}px`:"30px",height:"30px"}},[e.icon]))])}}),en=S({name:"NativeSidebarItem",props:{item:{required:!0,type:Object}},setup(e){const t=`iconfont ${e.item.icon}`;function n(i){var s;ce(i,"effectAllowed","copy",!1),(s=i.dataTransfer)==null||s.setData("element",JSON.stringify(e.item.attrs))}return()=>{var i;return d("div",{class:"native-item p-1 cursor-move",title:(i=e.item.title)!=null?i:e.item.attrs.name,draggable:!0,onDragstart:n},[d("i",{class:`${t}`,style:{fontSize:"30px"}},null)])}}});function _e(e,t){return t==="native"}var tn=S({name:"CoFormLayoutSidebar",props:{stencil:{required:!0,type:Function},drawer:{required:!0,type:Object},display:{required:!0,type:String}},setup(e){const t=C(null);if(e.display==="x6"){let s;const o=X(()=>e.drawer.graph);te(()=>o.value,()=>{var a;if(o.value&&!s&&e.stencil&&!_e(e.stencil,e.display)){const r=e.stencil(e.drawer);s=new R.exports.Addon.Stencil({title:"Components",target:o.value,scaled:!1,animation:!0,search(c,h){const l=c.attrs.text.text;return new RegExp(h,"i").test(l)},placeholder:"Search by shape name",notFoundText:"Not Found",collapsable:!0,stencilGraphWidth:208,stencilGraphHeight:180,groups:r.groups,getDragNode:c=>r.getDragNode(c,e.drawer),getDropNode:c=>r.getDropNode(c,e.drawer),validateNode:c=>r.validateNode(c,e.drawer)}),(a=t.value)==null||a.appendChild(s.container);for(const c of r.groups)s.load(r.nodes[c.name],c.name)}})}const n=C(null),i=X(()=>{if(!n.value)return null;const s=new Map(n.value.groups.map(o=>[o.name,[]]));for(const[o,a]of Object.entries(n.value.nodes))s.get(o)&&s.set(o,a.map(c=>L(O({},c),{name:o})));return[...s]});return _e(e.stencil,e.display)&&(n.value=e.stencil(e.drawer)),{refStencil:t,nativeStencil:n,nativeStencilGroups:i}},render(){var e;return d("div",{class:`sa-form-side flex flex-col justify-start p-1 box-border relative ${this.display==="x6"&&"w-52"}`},[this.display==="x6"?d("div",{ref:"refStencil"},null):(e=this.nativeStencilGroups)==null?void 0:e.map(t=>t[1].map(n=>d(en,{item:n},null)))])}});function Me(e,t){const n=e.selected[0];if(!!n&&Ne(t.attr,n))return n.attrs[t.attr]}var nn=S({name:"SaFormControllerDialogLayout",props:{plugin:{required:!0,type:Object},drawer:{required:!0,type:Object},controller:{required:!0,type:Object}},setup(e){var r;const t=C(!1);let n;if(e.plugin.dialog){const c=/\.\/.+\/(.+)\/index.tsx/i;for(const h of Object.keys(e.controller.components)){const l=(r=h.match(c))==null?void 0:r[1];l&&l===e.plugin.dialog.component&&(n=e.controller.components[h])}}const i=ee();s();async function s(){if(n){const c=await n();i.value=c.default}}const o=X(()=>i.value?at(i.value,{drawer:e.drawer,plugin:e.plugin}):"");function a(){var l,u;const c=(l=o.value)==null?void 0:l.component.exposed;if(!(c==null?void 0:c.update)){console.error(`[Sa error]: Plugin ${(u=e.plugin.dialog)==null?void 0:u.component} doesn't have expose update function.`);return}const{update:h}=c;try{const m=h();lt(m,Me(e.drawer,e.plugin))||e.drawer.updateElemData(e.drawer.selected[0],{[e.plugin.attr]:I(m)})}catch(m){console.error(m)}t.value=!1}return()=>{var c,h,l;return d("div",{class:"dialog-container"},[((c=e.plugin.dialog)==null?void 0:c.filter)?d(xe,{modelValue:e.plugin.dialog.filter(Me(e.drawer,e.plugin)),disabled:!0},null):"",d(ne,{onClick:()=>t.value=!0},{default:()=>[A("set")]}),ye(d("div",null,[d(rt,{title:(l=(h=e.plugin.dialog)==null?void 0:h.title)!=null?l:e.plugin.label,modelValue:t.value,closeOnClickModal:!1,onClose:()=>t.value=!1,modal:!1},{default:()=>[o.value],footer:()=>d("div",null,[d(ne,{type:"default",onClick:()=>t.value=!1},{default:()=>[A("cancel")]}),d(ne,{type:"primary",onClick:a},{default:()=>[A("submit")]})])})]),[[ot("dialog-drag")]])])}}});function Ae(e,t,n,i){i(e.attr,t,n)}function sn(e,t,n){var o,a;const i=t.selected[0];let s;switch(i&&Ne(e.attr,i)&&(s=i==null?void 0:i.attrs[e.attr]),e.type){case Y.Input:return d(xe,{class:"sa-plugin",modelValue:s,onInput:r=>Ae(e,r,t,n.valueChange),disabled:(o=e.disabled)!=null?o:!1},null);case Y.Number:return d(ct,{class:"sa-plugin",controls:!1,modelValue:s,onInput:r=>Ae(e,r,t,n.valueChange),disabled:(a=e.disabled)!=null?a:!1},null);case Y.Dialog:return d(nn,{class:"sa-plugin",drawer:t,plugin:e,controller:n},null);default:return console.error(`[Sa error]: Unexpected plugin type ${e.type}.`),d("span",{class:"bg-red-700 w-full block text-center"},[e.type])}}var on=S({name:"ControllerItem",props:{plugin:{required:!0,type:Object},drawer:{required:!0,type:Object},controller:{required:!0,type:Object}},setup(e){const t=X(()=>sn(e.plugin,e.drawer,e.controller));return()=>t.value}});var rn=S({name:"SaFormLayoutController",props:{drawer:{required:!0,type:Object},controller:{required:!0,type:Object}},setup(e){const t=X(()=>{var i;const n=(i=e.drawer.selected[0])==null?void 0:i.attrs.type;if(n){if(e.controller.plugins[n])return e.controller.plugins[n];console.warn(`[Sa warn]: Plugins not found in type ${y[n]}.`)}});return()=>{var n;return d("div",{class:"controller-container"},[t.value?(n=t.value.basic)==null?void 0:n.map(i=>d("div",{class:"controller-item"},[d("div",{class:"controller-item-label"},[i.label]),d("div",{class:"controller-item-plugin"},[d(on,{plugin:i,drawer:e.drawer,controller:e.controller},null)])])):""])}}}),Le=S({props:{type:{required:!0,type:String},display:{type:String},id:{required:!0,type:String}},setup(e,t){var o;const n=(o=e.display)!=null?o:"x6",i=we(Qt[e.type](n)),s=i.workspace;return()=>d("section",{class:"flex flex-col"},[d("header",null,[d(dt,null,{default:()=>[d(Zt,{options:i.header,drawer:i.drawer,class:"bg-slate-500"},null)]})]),d("main",{class:"mt-1 flex flex-grow"},[d("aside",null,[d(tn,{stencil:i.side,display:n,drawer:i.drawer,class:"bg-slate-500 h-full"},null)]),d("main",{class:"flex-grow justify-center bg-slate-500 mx-1 overflow-auto"},[d(s,{drawer:i.drawer,display:e.display},null)]),d("aside",{class:"w-64 bg-slate-500 shrink-0"},[d(rn,{drawer:i.drawer,controller:i.controller},null)])])])}});const an={class:"w-3/5 mx-auto h-full",style:{"min-width":"calc(472px + 0.5rem)"}},ln={class:"flex justify-center items-center"},cn=be("h1",{class:"font-bold text-lg py-4"},"Sa Form",-1),dn=S({setup(e){var i;const t="SA_FORM_DISPLAY",n=C((i=localStorage.getItem(t))!=null?i:"x6");return te(()=>n.value,s=>{localStorage.setItem(t,s)}),(s,o)=>(se(),ut("div",an,[be("header",ln,[cn,d(ie(ft),{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=a=>n.value=a),class:"ml-4","active-value":"x6","active-color":"rgb(49 208 198)","active-text":"x6","inactive-value":"native","inactive-color":"#ff4949","inactive-text":"native"},null,8,["modelValue"])]),n.value==="native"?(se(),Se(ie(Le),{key:0,id:"1",type:"PcForm",display:n.value,class:"h-1/2"},null,8,["display"])):(se(),Se(ie(Le),{key:1,id:"1",type:"PcForm",display:n.value,class:"h-1/2"},null,8,["display"]))]))}});const Re=(e,t)=>{var o;const n=t.arg||t.value;if(!n){console.error("\u53C2\u6570\u6709\u8BEF");return}const i=t.value,s=ht(n)?n.value:(o=t.instance)==null?void 0:o.$refs[n];if(!s){console.error(`\u6CA1\u6709\u627E\u5230 ${n} \u5BF9\u5E94\u7684\u5B9E\u4F8B`);return}if(typeof s.addReference!="function"){console.error(`${n} \u5BF9\u5E94\u7684\u5B9E\u4F8B\u4E0D\u662F VContextmenu`);return}e.$contextmenuKey=n,s.addReference(e,i)},Be=(e,t)=>{var s;const n=e.$contextmenuKey;if(!n)return;const i=(s=t.instance)==null?void 0:s.$refs[n];i==null||i.removeReference(e)},un=(e,t)=>{Be(e,t),Re(e,t)},fn={mounted:Re,updated:un,beforeUnmount:Be},x={contextmenu:"v-contextmenu",contextmenuIcon:"v-contextmenu-icon",contextmenuInner:"v-contextmenu-inner",contextmenuDivider:"v-contextmenu-divider",contextmenuItem:"v-contextmenu-item",contextmenuItemHover:"v-contextmenu-item--hover",contextmenuItemDisabled:"v-contextmenu-item--disabled",contextmenuItemDanger:"v-contextmenu-item--danger",contextmenuGroup:"v-contextmenu-group",contextmenuGroupTitle:"v-contextmenu-group__title",contextmenuGroupMenus:"v-contextmenu-group__menus",contextmenuSubmenu:"v-contextmenu-submenu",contextmenuSubmenuTitle:"v-contextmenu-submenu__title",contextmenuSubmenuMenus:"v-contextmenu-submenu__menus",contextmenuSubmenuMenusTop:"v-contextmenu-submenu__menus--top",contextmenuSubmenuMenusRight:"v-contextmenu-submenu__menus--right",contextmenuSubmenuMenusBottom:"v-contextmenu-submenu__menus--bottom",contextmenuSubmenuMenusLeft:"v-contextmenu-submenu__menus--left",contextmenuSubmenuArrow:"v-contextmenu-submenu__arrow"};function hn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ce(e)}const mn={trigger:["contextmenu"]},je=S({name:"VContextmenu",props:{modelValue:{type:Boolean,default:!1},autoAjustPlacement:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},teleport:{type:[String,Object],default:()=>"body"}},emits:["show","hide","update:modelValue"],setup(e,{emit:t}){const n=C(null),i=C(e.modelValue||!1),s=v=>{i.value=v,t("update:modelValue",v)},o=C({top:0,left:0}),a=X(()=>({top:`${o.value.top}px`,left:`${o.value.left}px`})),r=C(null),c=(v,E)=>{var fe,he;const g=v instanceof Event?E:v,W=(g==null?void 0:g.autoAjustPlacement)||e.autoAjustPlacement,N={top:(g==null?void 0:g.top)||0,left:(g==null?void 0:g.left)||0};v instanceof Event&&(v.preventDefault(),N.top=(fe=g==null?void 0:g.top)!=null?fe:v.pageY,N.left=(he=g==null?void 0:g.left)!=null?he:v.pageX),s(!0),Ee(()=>{if(W){const K=n.value;if(!K)return;const me=K.clientWidth,pe=K.clientHeight;if(pe+N.top>=window.innerHeight+window.scrollY){const F=N.top-pe;F>window.scrollY&&(N.top=F)}if(me+N.left>=window.innerWidth+window.scrollX){const F=N.left-me;F>window.scrollX&&(N.left=F)}}o.value=N,t("show")})},h=()=>{r.value=null,s(!1),t("hide")},l=we(new Map),u=C(),m=X(()=>u.value&&l.get(u.value)),p=(v,E)=>{const g=(()=>(E==null?void 0:E.trigger)?Array.isArray(E.trigger)?E.trigger:[E.trigger]:mn.trigger)(),W=N=>{e.disabled||(u.value=v,c(N,{}))};g.forEach(N=>{v.addEventListener(N,W)}),l.set(v,{triggers:g,handler:W})},f=v=>{const E=l.get(v);!E||(E.triggers.forEach(g=>{v.removeEventListener(g,E.handler)}),l.delete(v))},M=v=>{if(!v.target||!n.value||!u.value)return;n.value.contains(v.target)||m.value&&m.value.triggers.includes("click")&&u.value.contains(v.target)||s(!1)};return te(i,v=>{v?document.addEventListener("click",M):document.removeEventListener("click",M)}),mt(()=>{document.removeEventListener("click",M)}),z("visible",i),z("autoAjustPlacement",e.autoAjustPlacement),z("show",c),z("hide",h),{visible:i,style:a,currentReferenceOptions:m,currentOptions:r,contextmenuRef:n,addReference:p,removeReference:f,toggle:s,show:c,hide:h}},methods:{renderContent(){var e,t;return ye(d("div",{class:x.contextmenu,ref:"contextmenuRef",style:this.style},[d("ul",{class:x.contextmenuInner},[(t=(e=this.$slots).default)==null?void 0:t.call(e,{triggerOptions:"currentReferenceOptions",options:"currentOptions"})])]),[[pt,"visible"]])}},render(){let e;return this.visible?this.teleport?d(gt,{to:this.teleport},hn(e=this.renderContent())?e:{default:()=>[e]}):this.renderContent():null}});function pn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ce(e)}const $e=S({name:"VContextmenuItem",props:{disabled:{type:Boolean,default:!1},hideOnClick:{type:Boolean,default:!0},icon:{required:!1,type:Object},type:{requred:!1,type:String}},emits:["click","mouseenter","mouseleave"],setup(e,{emit:t}){const n=Z("hide"),i=C(!1);return{classes:X(()=>({[x.contextmenuItem]:!0,[x.contextmenuItemDisabled]:e.disabled,[x.contextmenuItemHover]:i.value,[x.contextmenuItemDanger]:e.type==="danger"})),handleClick:c=>{e.disabled||(t("click",c),e.hideOnClick&&(n==null||n()))},handleMouseenter:c=>{e.disabled||(i.value=!0,t("mouseenter",c))},handleMouseleave:c=>{e.disabled||(i.value=!1,t("mouseleave",c))}}},render(){var t,n;const e=this.icon;return d("li",{class:this.classes,onClick:this.handleClick,onMouseenter:this.handleMouseenter,onMouseleave:this.handleMouseleave},[e?d(vt,{class:"mr-1 leading-0"},pn(e)?e:{default:()=>[e]}):d("span",{style:{width:"18px"}},null),(n=(t=this.$slots).default)==null?void 0:n.call(t)])}}),Fe=S({name:"VContextmenuDivider",render(){return d("li",{class:x.contextmenuDivider},null)}}),gn=S({name:"VContextmenuIcon",props:{name:{type:String,required:!0}},render(){return d("i",{class:[x.contextmenuIcon,`${x.contextmenuIcon}-${this.name}`]},null)}}),Ve=S({name:"VContextmenuSubmenu",props:{title:{type:String,required:!0},disabled:{type:Boolean,default:!1}},emits:["mouseenter","mouseleave"],setup(e,{emit:t}){const n=C(null),i=Z("autoAjustPlacement"),s=C(["top","right"]),o=C(!1),a=l=>{e.disabled||(o.value=!0,t("mouseenter",l),Ee(()=>{const u=[];if(i){const{target:m}=l,p=m.getBoundingClientRect();if(!n.value)return;const f=n.value.clientWidth,M=n.value.clientHeight;p.right+f>=window.innerWidth?u.push("left"):u.push("right"),p.bottom+M>=window.innerHeight?u.push("bottom"):u.push("top")}s.value=u}))},r=l=>{e.disabled||(o.value=!1,t("mouseleave",l))},c=X(()=>({[x.contextmenuItem]:!0,[x.contextmenuSubmenuTitle]:!0,[x.contextmenuItemHover]:o.value,[x.contextmenuItemDisabled]:e.disabled})),h=X(()=>({[x.contextmenu]:!0,[x.contextmenuSubmenuMenus]:!0,[x.contextmenuSubmenuMenusTop]:s.value.includes("top"),[x.contextmenuSubmenuMenusRight]:s.value.includes("right"),[x.contextmenuSubmenuMenusBottom]:s.value.includes("bottom"),[x.contextmenuSubmenuMenusLeft]:s.value.includes("left")}));return{hover:o,submenuRef:n,titleClasses:c,menusClasses:h,handleMouseenter:a,handleMouseleave:r}},render(){var e,t,n,i;return d("li",{class:x.contextmenuSubmenu,onMouseenter:this.handleMouseenter,onMouseleave:this.handleMouseleave},[d("div",{class:this.titleClasses},[((t=(e=this.$slots).title)==null?void 0:t.call(e))||this.title,d("span",{class:x.contextmenuSubmenuArrow},[d(gn,{name:"right-arrow"},null)])]),this.hover?d("div",{ref:"submenuRef",class:this.menusClasses},[d("ul",{class:x.contextmenuInner},[(i=(n=this.$slots).default)==null?void 0:i.call(n)])]):null])}}),qe=S({name:"VContextmenuGroup",props:{title:{type:String,default:void 0},maxWidth:{type:[Number,String],default:void 0}},setup(e){return{style:X(()=>{if(!!e.maxWidth)return{"max-width":typeof e.maxWidth=="number"?`${e.maxWidth}px`:e.maxWidth,"overflow-x":"auto"}})}},methods:{renderTitle(){var t,n;const e=((n=(t=this.$slots).title)==null?void 0:n.call(t))||this.title;return e?d("div",{class:x.contextmenuGroupTitle},[e]):null}},render(){var e,t;return d("li",{class:x.contextmenuGroup},[this.renderTitle(),d("ul",{style:this.style,class:x.contextmenuGroupMenus},[(t=(e=this.$slots).default)==null?void 0:t.call(e)])])}}),vn=e=>{e.directive("contextmenu",fn),e.component(je.name,je),e.component($e.name,$e),e.component(Fe.name,Fe),e.component(Ve.name,Ve),e.component(qe.name,qe)},xn={install:vn};var yn={install:function(e,t){const n=!!(t==null?void 0:t.containment),i=function(){const o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return{width:o,height:a}},s=function(o){const a=o.getElementsByClassName("el-dialog")[0],r=o.getElementsByClassName("el-dialog__header")[0];r.style.userSelect="none",r.style.cursor="move",r.classList.add("active:bg-gray-100","transition","ease-in","duration-300"),a.offsetX=0,a.offsetY=0;const c=function(u){let m=u.pageX-a.offsetX,p=u.pageY-a.offsetY;if(n){m=Math.max(m,0),p=Math.max(p,0);const f=i();m=Math.min(m,f.width-a.offsetWidth),p=Math.min(p,f.height-a.offsetHeight)}a.style.margin="0px",a.style.left=m+"px",a.style.top=p+"px"},h=function(){removeEventListener("mousemove",c),removeEventListener("mouseup",h)},l=function(u){a.offsetX=u.pageX-a.offsetLeft,a.offsetY=u.pageY-a.offsetTop,addEventListener("mousemove",c),addEventListener("mouseup",h)};r.addEventListener("mousedown",l)};e.directive("dialog-drag",{mounted:s})}};const ue=xt(dn);ue.use(xn);ue.use(yn,{containment:!0});ue.mount("#app");export{Sn as i};
